<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Yarn - Dial</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.theme.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.structure.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.theme.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css" />
        <link rel="stylesheet" type="text/css" href="css/dial.css" />
        <link rel="stylesheet" type="text/css" href="css/color.css" />
        <link href="img/icons/logo.png" rel="icon" />
    </head>
    <body>
        <header data-id="header" class="pull-right">
            <a data-id="logo" href="http://yarn-me.com">
                <img src="img/icons/logo.png" alt="logo" />
            </a>
        </header>
        <section data-id="main" class="center">
            <div data-id="avatar">
                <img src="img/icons/default_contact.png" alt="avatar" />
            </div>
        </section>
        <section data-id="sub-footer">
            <div data-id="timer" class="center grey font-segoe">00:00</div>
            <div data-id="end-call" class="center bg-orange pointer" onclick="doHangUp()">
                <img src="img/icons/phone-down.png" alt="end call" />
            </div>
        </section>
        <section data-id="footer" class="bg-black">
            <div data-id="footer-1st">
                <div data-id="microphone-icon" class="col-xs-offset-1 col-xs-3 center pointer" onclick="doMicrophone()">
                    <img class="padding-md" src="img/icons/microphone.png" alt="microphone" />
                </div>
                <div data-id="dial-icon" class="col-xs-4 center pointer">
                    <img class="padding-md" src="img/icons/dial-pad.png" alt="dial pad" />
                </div>
                <div data-id="loudness-icon" class="col-xs-3 center pointer">
                    <img class="padding-md" src="img/icons/loudness.png" alt="loudness" />
                </div>
            </div>
            <div data-id="footer-2nd">
                <div data-id="home-icon" class="col-xs-3 center pointer block">
                    <img class="padding-sm" src="img/icons/home.png" alt="home" />
                </div>
                <div data-id="contacts-icon" class="col-xs-3 center pointer block" onclick="doPhoneContacts()">
                    <img class="padding-sm" src="img/icons/contacts.png" alt="contacts" />
                </div>
                <div data-id="logs-icon" class="col-xs-3 center pointer block" onclick="doCallLogs()">
                    <img class="padding-sm" src="img/icons/logs.png" alt="logs" />
                </div>
                <div data-id="settings-icon" class="col-xs-3 center pointer block">
                    <img class="padding-sm" src="img/icons/settings.png" alt="settings" />
                </div>
            </div>
        </section>

        <!--SCRIPT-->
        <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/app.js"></script>
        <script type="text/javascript" src="js/dial.js"></script>
        <script type="text/javascript" src="js/my_linphone.js"></script>
        
        <script type="text/javascript">
            app.initialize();
            if (global.get('auth') === null) {
                var username = getUrlParameter('username');
                var password = getUrlParameter('password');
                console.log(username);
                console.log(password);
                if (username !== null && password !== null) {
                    window.location.href = 'auto.html?u=' + username + '&p=' + password;
                } else {
                    //window.location = 'login.html';
                }
            }
        </script>
        <script>
            function sipRegister(response) {
            	var user = global.getUser();
            	var sipUsername = response;
            	//var password = user.data.uipass
                password = '123456';
                window.registerSip(sipUsername, password, function(message) {
                    //empty
                });
            }
            
            function doHangUp() {
            	window.hangUp(function(message) {
                //empty
                });
            }
            
            function doMicrophone() {
                
            }
            
            function doPhoneContacts() {

                window.phoneContacts(function(message) {
                //empty
                });
            }
            function doCallLogs() {

                window.callLogs(function(message) {
                //empty
                });
            }
            function doVideoCall() {
            
                // get data from dialedNumber
                var dialedNumber = getDialedNumber(); //ie: playMessage-1-24612-1;
                window.videoCall(dialedNumber, function(message) {
                //empty
                });
            }
            
            global.getSipUsernameApi('anh@test.com', '123456', sipRegister);

        </script>
        
    </body>
</html>
