<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Yarn - Dial</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.theme.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.structure.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.theme.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css" />
        <link rel="stylesheet" type="text/css" href="css/dial.css" />
        <link rel="stylesheet" type="text/css" href="css/color.css" />
        <link href="img/icons/logo.png" rel="icon" />
    </head>
    <body class="bg-black">
        <section id="body">
            <header data-id="header" class="pull-right">
                <a data-id="logo" href="http://yarn-me.com" onclick="window.open('http://yarn-me.com', '_blank', 'location=yes')">
                    <img src="img/dial/logo.png" alt="logo" style="padding: 10px;" />
                </a>
            </header>
            <section data-id="main" class="center">
                <div data-id="avatar">
                    <img src="img/icons/default_contact.png" alt="avatar" />
                </div>
            </section>
            <section data-id="sub-footer">
                <div data-id="timer" class="center grey font-segoe">00:00</div>
                <div data-id="end-call" class="center bg-orange pointer" onclick="doHangUp()">
                    <img src="img/icons/phone-down.png" alt="end call" />
                </div>
            </section>
            <section data-id="footer" class="bg-black">
                <div data-id="footer-1st">
                    <div data-id="microphone-icon" class="col-xs-offset-1 col-xs-3 center pointer" onclick="doMicrophone()">
                        <img class="padding-md" src="img/icons/microphone.png" alt="microphone" />
                    </div>
                    <div data-id="dial-icon" class="col-xs-4 center pointer" onclick="doDialPad()">
                        <img class="padding-md" src="img/icons/dial-pad.png" alt="dial pad"/>
                    </div>
                    <div data-id="loudness-icon" class="col-xs-3 center pointer" onclick="doLoudness()">
                        <img class="padding-md" src="img/icons/loudness.png" alt="loudness" />
                    </div>
                </div>
                <div data-id="footer-2nd">
                    <div data-id="home-icon" class="col-xs-3 center pointer block" onclick="doHome()">
                        <img class="padding-sm" src="img/icons/home.png" alt="home" />
                    </div>
                    <div data-id="contacts-icon" class="col-xs-3 center pointer block" onclick="doPhoneContacts()">
                        <img class="padding-sm" src="img/icons/contacts.png" alt="contacts" />
                    </div>
                    <div data-id="logs-icon" class="col-xs-3 center pointer block" onclick="doCallLogs()">
                        <img class="padding-sm" src="img/icons/logs.png" alt="logs" />
                    </div>
                    <div data-id="settings-icon" class="col-xs-3 center pointer block" onclick="doCallLogs()">
                        <img class="padding-sm" src="img/icons/settings.png" alt="settings" onclick="doSettings()"/>
                    </div>
                </div>
            </section>
        </section>
        <section id="dial-pad">

        </section>

        <!--SCRIPT-->
        <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/app.js"></script>
        <script type="text/javascript" src="js/dial.js"></script>
        <script type="text/javascript" src="js/my_linphone.js"></script>

        <script type="text/javascript">
                            app.initialize();
        </script>
        <script>
            function sipRegister(response) {
                var user = global.getUser();
                var sipUsername = response;
                //var password = user.data.uipass
                password = '123456';
                window.registerSip(sipUsername, password, function (message) {
                    //empty
                });
            }

            function doHangUp() {
                window.hangUp(function (message) {
                    //empty
                });
                window.location.href = 'index.html';
            }

            function doMicrophone() {
                var enable = true;
                window.enableSpeaker(enable, function (message) {
                    //empty
                });
            }

//            function doDialPad() {
//                window.showDialPad(function (message) {
//                    //empty
//                });
//            }

            function doLoudness() {
                window.loudness(function (message) {
                    //empty
                });
            }

            function doSettings() {
                window.settings(function (message) {
                    //empty
                });
            }
            function doHome() {
                // Need to code
            }
            function doPhoneContacts() {

                window.phoneContacts(function (message) {
                    //empty
                });
            }
            function doCallLogs() {

                window.callLogs(function (message) {
                    //empty
                });
            }
            function doVideoCall() {

                // get data from dialedNumber
                var dialedNumber = getDialedNumber(); //ie: playMessage-1-24612-1;
                window.videoCall(dialedNumber, function (message) {
                    //empty
                });
            }

			function getTimer() {
				
			}

			function doSendDmtf() {
                window.dialDtmf(function (message) {
                    //empty
                });
            }

			function onSuccessQualitySending() {
				alert('hehe');
				doSendDmtf();
				console.log('Quality sended.');
			}

			function callQualityScheduled() {
				setInterval(sendCallQuality, 6000);
			}

			function sendCallQuality() {
				window.getCallQuality(function(data) {
					var telno = global.get('telno');
		            var password = global.get('password');
		            console.log('Sending quality number: '+data.quality+' of the call (to '+telno+').');
					global.sendQuality(telno, password, data.quality, onSuccessQualitySending);
                });
				
			}

			callQualityScheduled();

        </script>

    </body>
</html>
